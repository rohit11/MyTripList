name: Update README with Admin PAT

on:
  workflow_dispatch:
    inputs:
      branch:
        description: 'Branch to update'
        required: false
        default: 'release/1.0.0'

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Update README.md
        run: |
          echo "Adding random text to README.md file" >> README.md
          echo "Random text: $RANDOM" >> README.md
          git config user.name "Admin User"
          git config user.email "admin@example.com"
          git add README.md
          git commit -m "Update README with random text"

      - name: Push changes to branch with PAT
        env:
          PAT_TOKEN: ${{ secrets.PAT_TOKEN }}
        run: |
          git push https://${{ secrets.PAT_TOKEN }}@github.com/${{ github.repository }} ${{ github.event.inputs.branch || 'release/1.0.0' }} --force
